# Getting started with experimental CoinGreen network node

## Setup
* Ensure that inbound\outbound traffic is allowed for TCP port 34558
* Install libraries and tools
    - _sudo apt-get update_
    - _sudo apt-get install libboost-system-dev libboost-filesystem-dev libboost-chrono-dev libboost-program-options-dev libboost-test-dev libboost-thread-dev libevent-dev_
    - _sudo apt-get install python2_
* Create user _coingreen_ with primary group _coingreen_
> [adduser man page](https://linux.die.net/man/8/adduser)
* Add _coingreen_ user to _adm_ and _sudo_ groups
> [usermod man page](https://linux.die.net/man/8/usermod)

**All further steps shall be executed by coingreen user.**
* Download CoinGreen  ubuntu-binaries.zip at https://github.com/coin-green/coingreen/releases/tag/v2.0.0.14
* Extract files to _/home/coingreen_, check/set execution permissions (_chmod +x_) to _coingreend_, _coingreen-cli_, _coingree-tx_, _start.sh_, _util/rpcuser.py_
* Execute _util/rpcuser.py coingreen_ 

    Sample output:
```
String to be appended to coingreen.conf:
rpcauth=coingreen:
59a4dd294f929381e786359f22df686323963049e88cebf73f2458efa2c3a4287d2299e5efb7f162417b2116960a33
Your password:
qpLFWOKWyMI_F69NcP7fl3A0KCXL2lwVjx_ImRYhGYA=
```

* The password created will be RPC user password for user _coingreen_ and can be used for _coingreen-cli_ utility.
    _coingreen-cli_ and _coingreen-tx_ are bitcoing command-line utilities adopted for coingreen
    You may find relevant help and manuals elsewhere. 
> This reference may be a good starting point: [bitcoin-cli help](https://chainquery.com/bitcoin-cli)

* Open coingreen configuration file at _conf/coingreen.conf_, append string to configuration file as suggested above.
* Uncomment and set the following properties in configuration file:
    _bind=\<node ip address\>:34558_       
    If you are using AWS pls note that it provides two IPv4 addresses - external and internal.  **Internal** address shall be used in this property.
    If IPv6 address is used [address]:port notation shall be applied.
    THe picture below illustrates ccorrect address binding configuration for Amazon LightSail node.

![Address binding](https://github.com/coin-green/genesis/blob/main/wiki-images/bind.jpg "Address binding")

* Configure connections to two existing nodes. _conf/coingreen.conf_  includes detailed explanation how to do it using _connect_ or _addnode_ commands. If you are configuring or maintaining several nodes please avoid circular references. 

## Startup
Distribution package includes two sample files that show how to start CoinGreen network node:
* start.sh - simple one-liner shell script
```
/home/coingreen/coingreend -conf=/home/coingreen/conf/coingreen.conf -datadir=/home/coingreen/data \
                           -daemon -disablewallet=true -txindex=0
```
Note that this script will start the node as daemon (background process, with no wallet and the node will be ligthweighted, without full transaction index).  If you want to run full node please change _txindex=0_ to _txindex=1_  [(the explanation)](https://bitcoin.stackexchange.com/questions/35707/what-are-pros-and-cons-of-txindex-option)

* coingreen.service - systemd control file located at service folder
> [systemd explanation](https://www.digitalocean.com/community/tutorials/how-to-use-systemctl-to-manage-systemd-services-and-units)

You can check node status using coingreen-cli utility
Please replace rpcpassword in the sample picture with your unique password generated by _util/rpcuser.py coingreen_

![Checking node status](https://github.com/coin-green/genesis/blob/main/wiki-images/getinfo.jpg "Checking node status")

